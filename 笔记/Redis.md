### Redis
#### Redis的优点
- 性能优异，读的速度10W次/秒，写8W次/秒（性能优越）
- 支持持久化，支持AOF和RDB两种方式(支持持久化)
- 数据结构丰富，字符串、列表、哈希表、集合、有序集合(数据结构丰富)
- 支持主从复制，主机会自动将数据同步到从机，可以实现读写分离(支持主从复制)
- 支持事务，所有操作都是原子性的，也支持多个多个操作合并后的原子性操作(支持事务)

#### Redis缺点
- 数据库容量有限，不能用作海量数据的高性能读写，适合的场景适合较小数量的高性能操作和运算上
- 不具备自动容错和恢复功能，Master宕机会导致部分读写失败，需要等待机器重启或则手动切换IP才能恢复
- Master宕机，有部分数据未能及时同步到从机，切换IP后引入数据不一致问题降低系统可用性
- 难以支持在线扩容，集群容量达到上限时在线扩容变得很复杂，上线时需要确保有足够的空间

#### Redis与Memcache区别
- Redis是内存中的NoSQL，Memcache是分布式内存对象缓存系统，能在内存中做缓存
- Memcache仅支持简单的K/V类型的数据，Redis同时还提供`String，List, Hash, Set，Zset`等数据结构的存储
- Redis支持`RDB/AOF`持久化，支持数据灾备恢复
- Memcache在多线程服务器具有额外性能，Redis是单线程高性能内存缓存服务器
- Redis它支持简单的事务、发布订阅等

#### Redis持久化方式  
> Redis提供了两种持久化方案：`RDB`持久化和`AOF`持久化，前者是快照的方式，后者是类似日志追加的方式，默认是`RDB`方式

##### RDB
- rdb文件是一个压缩过的二进制文件，可以通过该文件还原快照时的数据库状态  
- rdb触发时机是在执行`save`和`bgsave`命令  
- 触发规则设置 `save <seconds> <changes>`规则，自动间隔性执行bgsave命令  
- 主从复制时，从库全量复制同步主库数据，主库会执行`bgsave`  
- 执行`shutdown`命令关闭Redis时，会执行`save`命令  

  - 优点
    > RDB快照是一个压缩过的非常紧凑的文件，保存着某个时间点的数据集，适合做数据的备份，灾难恢复可以最大化Redis的性能，在保存RDB文件，服务器进程只需fork一个子进程来完成RDB文件的创建，父进程不需要做IO操作与AOF相比，恢复大数据集的时候会更快

  - 缺点
    > RDB的数据安全性是不如AOF的，保存整个数据集的过程是比繁重的，根据配置可能要几分钟才快照一次，如果服务器宕机，那么就可能丢失几分钟的数据，Redis数据集较大时，fork的子进程要完成快照会比较耗CPU、耗时

##### AOF
- AOF持久化会把被执行的写命令写到AOF文件的末尾，记录数据的变化
- 默认情况下，Redis是没有开启AOF持久化的，开启后，每执行一条更改Redis数据的命令，都会把该命令追加到AOF文件中，这是会降低Redis的性能，建议使用性能高的硬盘

    - 优点
    > 数据更完整，安全性更高，秒级数据丢失（取决fsync策略，如果是everysec，最多丢失1秒的数据，AOF文件是一个只进行追加的日志文件，且写入操作是以Redis协议的格式保存的，内容是可读的，适合误删紧急恢复
    - 缺点
    > 对于相同的数据集，AOF文件的体积要大于RDB文件，数据恢复也会比较慢，根据所使用的 fsync 策略，AOF 的速度可能会慢于 RDB。 不过在一般情况下， 每秒 fsync 的性能依然非常高